:host([closed]) {
    display: none !important;
}

.popup-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(2px);

    & .grid {
        display: grid;
        background-color: var(--color-bg, white);
        border-radius: var(--radius, 0.5em);
        grid-template-columns: [start] 2em 1fr 2em [end];
        grid-template-rows: [header-start] auto [header-end content-start] 1fr [content-end footer-start] auto [footer-end];
        grid-template-areas:
            "nav-back title nav-menu"
            "content content content"
            "actions actions actions";
        justify-content: center;
        align-items: center;
        justify-items: center;
        max-height: 100dvh;
        max-width: 100dvw;
        width: var(--popup-width, clamp(480px, 80%, 720px));
        box-shadow: .5em .5em 1em rgba(0, 0, 0, 0.3);

        &>.bg {
            width: 100%;
            height: 100%;
            grid-column: start / end;

            &.header {
                grid-row: header-start / header-end;
                background-color: var(--color-primary);
                border-top-left-radius: var(--radius, 0.5em);
                border-top-right-radius: var(--radius, 0.5em);
            }

            &.content {
                grid-row: content-start / content-end;
            }

            &.footer {
                grid-row: footer-start / footer-end;
                background-color: color-mix(in srgb, var(--color-fg) 5%, transparent);
            }
        }

        & ::slotted(*),
        & slot>* {
            padding: 0.5em;
        }


        & ::slotted([slot="nav-menu"]),
        & slot[name="nav-menu"]>*,
        & ::slotted([slot="nav-back"]),
        & slot[name="nav-back"]>*,
        & ::slotted([slot="title"]),
        & slot[name="title"]>* {
            color: var(--color-bg);
            fill: currentColor;
        }

        & ::slotted([slot="nav-menu"]),
        & slot[name="nav-menu"]>*,
        & ::slotted([slot="nav-back"]),
        & slot[name="nav-back"]>* {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;

            &:is(svg),
            & svg {
                height: 1.2em;
                overflow: visible;
            }
        }

        & ::slotted([slot="nav-back"]),
        & slot[name="nav-back"]>* {
            grid-area: nav-back;
        }

        & ::slotted([slot="title"]),
        & slot[name="title"]>* {
            grid-area: title;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            text-overflow: ellipsis;
            text-align: center;
            font-size: 1.2em;
            word-break: break-word;
        }

        & ::slotted([slot="nav-menu"]),
        & slot[name="nav-menu"]>* {
            grid-area: nav-menu;
        }

        & ::slotted([slot="content"]),
        & slot[name="content"]>* {
            grid-area: content;
            overflow: hidden auto;
            scrollbar-width: thin;
            background-color: transparent !important;
            box-shadow: none !important;
            height: auto !important;
            max-height: 100%;
            align-self: start;
            justify-self: stretch;
            mask-image: linear-gradient(to bottom, black calc(100% - 3em), transparent 100%);
        }

        & ::slotted([slot="actions"]),
        & slot[name="actions"]>* {
            grid-area: actions;
            display: flex;
            width: 100%;
            justify-content: space-evenly;
        }
    }
}

/* mobile phones */
@media (max-width: 600px) {
    .popup-container {
        & .grid, & .header, & .footer {
            width: 100dvw;
            height: 100dvh;
            border-radius: 0 !important;
        }
    }
}